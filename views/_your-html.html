<style>
    ul#carousel {
        list-style: none;
        margin: 1em auto;
        padding: 0;
    }

    .amp-carousel {
        min-height: 600px;
        max-width: 450px;
        max-height: 700px;
        height: 100%;
        /* width: 350px; */
        position: relative;
        border: 2px solid black;
        overflow: hidden;
    }

    .amp-slide {
        /* width: 100%;
        height: 100%; */
        top: 0;
        position: absolute;
        /* padding: 1em; */
    }

    .amp-slide picture {
        position: relative;
        max-height: 100%;
    }
</style>
<div id="contents"></div>
<!-- amp -->
<script id="carousel-template" type="text/x-handlebars-template">
    <div id="carousel-container">
        <div class="previousThumbnail"></div>
        <ul id="carousel">
            {{#items}}
            <li>
                <!-- <img src='{{src}}?w=300' alt='{{ name }}' class="amp-main-img" /> -->

<picture>
    <source srcset="{{src}}?w=319, {{src}}?w=638 2x" media="(max-width: 320px)">
    <source srcset="{{src}}?w=767, {{src}}?w=1534 2x" media="(min-width: 321px) and (max-width: 768px)">
    <source srcset="{{src}}?w=1024, {{src}}?w=2048 2x" media="(min-width: 769px) and (max-width: 1024px)">
    <source srcset="{{src}}?w=1440, {{src}}?w=2880 2x" media="(min-width: 1025px) and (max-width: 1440px)">
    <source srcset="{{src}}?w=1920, {{src}}?w=3840 2x" media="(min-width: 1441px) and (max-width: 1920px)">
    <source srcset="{{src}}?w=2560, {{src}}?w=5120 2x" media="(min-width: 1921px) and (max-width: 2560px)">
    <source srcset="{{src}}?w=4000" media="(min-width: 2561px)">
    <img src="{{src}}?w=319" srcset="{{src}}?w=319, {{src}}?w=638 2x" alt="">
</picture>

            </li>
            {{/items}}
        </ul>
        <div class="nextThumbnail"></div>
    </div>
</script>
<script>
    (function ($) {
        $(document).ready(function () {

            $(window).load(function () {
                // Code that uses jQuery's $ can follow here.
                amp.init({
                    "client_id": "missguided",
                    "di_basepath": "http://i1.adis.ws/",
                    "err_img": "http://i1.adis.ws/i/playground/404"
                });
                // amp gen
                // var contents = document.getElementById('contents');
                // amp.get({ "name": "P9664838_set", "type": "s" }, function (data) {
                // amp.genHTML(data.P9664838_set, contents);
                // });

                // handlebars
                var contents = $('#contents');
                var template = Handlebars.compile($("#carousel-template").html());
                amp.get({ "name": "P9664838_set", "type": "s" }, function (data) {
                    var dom = template(data.P9664838_set);
                    contents.append(dom);
                    $('ul#carousel').ampCarousel({ "autoplay": true });

                });

            });
        });

    })(jQuery);
</script>
<script src="/js/handlebars-v4.0.11.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="js/amplience-sdk-client-master/dist/amplience-sdk-client.js"></script>